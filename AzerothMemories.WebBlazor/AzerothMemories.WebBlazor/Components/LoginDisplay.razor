@inject ClientAuthHelper _clientAuthHelper

<AuthorizeView>
    <Authorized>
        <MudMenu EndIcon="@Icons.Filled.KeyboardArrowDown" Label="Account" Color="Color.Inherit" Dense="true" AnchorOrigin="Origin.BottomRight" TransformOrigin="Origin.TopRight">
            <MudMenuItem Link="AddMemory">Restore</MudMenuItem>
            <MudMenuItem Link="AccountHistory">History</MudMenuItem>
            <MudMenuItem Link="AccountManage">Manage</MudMenuItem>
            <MudMenuItem OnClick=@(_ => TryLogout())>Log out</MudMenuItem>
        </MudMenu>
    </Authorized>
    <NotAuthorized>
        <MudMenu EndIcon="@Icons.Filled.KeyboardArrowDown" Label="Account" Color="Color.Inherit" Dense="true" AnchorOrigin="Origin.BottomRight" TransformOrigin="Origin.TopRight">
            <MudMenuItem OnClick=@(x => TrySignIn(x, "BattleNet"))>Log In</MudMenuItem>
        </MudMenu>
    </NotAuthorized>
    <Authorizing>
        <MudMenu EndIcon="@Icons.Filled.KeyboardArrowDown" Label="Account" Color="Color.Inherit" Dense="true" AnchorOrigin="Origin.BottomRight" TransformOrigin="Origin.TopRight" Disabled="true" />
    </Authorizing>
</AuthorizeView>

@code
{
    private async Task TrySignIn(MouseEventArgs e, string schema)
    {
	    await _clientAuthHelper.SignIn(schema);
    }

    private async Task TryLogout()
    {
	    await _clientAuthHelper.SignOut();
    }
}