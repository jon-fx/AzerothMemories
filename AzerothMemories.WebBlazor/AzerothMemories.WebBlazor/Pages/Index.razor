@page "/"
@inherits MoaComponentBase<IndexPageViewModel>

<AuthorizeView>
    <Authorized>
        <AccountHeaderCardComponent Services="@this" AccountViewModel="@ViewModel.AccountViewModel" />
    </Authorized>
</AuthorizeView>

<RecentPostsComponent Services="@this" AccountViewModel="@ViewModel.AccountViewModel" RecentPostsHelper="@ViewModel.RecentPostsHelper" />

@code {
    [Parameter, SupplyParameterFromQuery(Name = "page")] public string CurrentPage { get; init; }

    [Parameter, SupplyParameterFromQuery(Name = "type")] public string RecentPostType { get; init; }

    protected override async Task InternalComputeState()
    {
        await base.InternalComputeState();
        await ViewModel.ComputeState(CurrentPage, null, RecentPostType);
    }
}