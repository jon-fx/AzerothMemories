@page "/follow/{Id:long}"
@inherits MoaComponentBase<AccountFollowPageViewModel>

@if (!string.IsNullOrWhiteSpace(ViewModel.ErrorMessage))
{
    <CardErrorComponent ErrorMessage="@ViewModel.ErrorMessage" />
}
else if (ViewModel.AccountViewModel == null || ViewModel.IsLoading)
{
    <CardLoadingComponent />
}
else
{
    <PageTitle>@ViewModel.AccountViewModel.GetDisplayName()'s Memories of Azeroth</PageTitle>

    <AccountHeaderCardComponent Services="@this" AccountViewModel="@ViewModel.AccountViewModel" />
    <MudTabs Class="@ClassPresets.Card" Outlined="true" Elevation="10" Rounded="true" Centered="true">
        <UserListComponent Services="@this" AccountViewModel="@ViewModel.AccountViewModel" ActiveAccountViewModel="@ActiveAccountServices.AccountViewModel" Following="false" />
        <UserListComponent Services="@this" AccountViewModel="@ViewModel.AccountViewModel" ActiveAccountViewModel="@ActiveAccountServices.AccountViewModel" Following="true" />
    </MudTabs>
}

@code {
    [Parameter] public long Id { get; init; }

    protected override async Task InternalComputeState()
    {
        await ViewModel.ComputeState(Id);
    }
}